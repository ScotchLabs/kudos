{% extends 'layout.html' %}
{% from "formhelpers.html" import render_errors %}

{% block title %}Nominations | Kudos{% endblock %}

{% block body %}
<!-- Main -->
    <section id="main" class="container">
        <header>
            <h2>Nominations!</h2>
            <p>
                Enter a nomination in one of the text boxes below and click to submit!<br>
                Voting will begin after nominations close!
            </p>
        </header>
        <div class="box">
            <span class="image featured"><img src="/static/images/snsbanner.png" alt="" /></span>
            {% for award in awards %}
                <h2 id="{{ award.id }}" class="award-name anchor"><b>{{ award.name }}</b></h2>
                <ul class="nominations">
                    {% for nom in award.nominations|sort(attribute="id") %}
                        <li>{{ nom.name }}</li>
                    {% endfor %}
                </ul>
                <form method="POST" onsubmit="return submitOnce(this);" action="{{ url_for('awards', _anchor=award.id) }}">
                    <div class="row uniform 50%">
                        <div class="9u 12u(mobilep)">
                            {{ form.csrf_token }}
                            {{ form.award_id(value=award.id) }}
                            {{ form.entry(placeholder=form.entry.label.text) }}
                        </div>
                        <div class="3u 12u(mobilep)">
                            <input type="submit" value="Submit" class="fit">
                        </div>
                    </div>
                    {{ render_errors(form.entry) }}
                </form>
                {% if award != awards[-1] %}
                    {# Only put lines between awards, not after the last one #}
                    <hr>
                {% endif %}
            {% endfor %}
        </div>
    </section>
{% endblock body %}
